<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>An Introduction to Display Editing with Vi - Section 5</TITLE>
<!-- Sccsid @(#)paper-5.html	1.5 (gritter) 3/3/02 -->
<!-- This file was originally generated by unroff 1.0, 03/14/97 13:33:36. -->
<!-- Derived from the FreeBSD document collection. -->
<LINK REL=stylesheet TYPE="text/css" HREF="paper.css">
</HEAD><BODY>
<H2><A NAME="section28">5.</A>&nbsp;&nbsp;High level commands
</H2>
<H2><A NAME="section29">5.1.</A>&nbsp;&nbsp;Writing, quitting, editing new files
</H2>
<P>
&nbsp;&nbsp;So far we have seen how to enter
<I>vi
</I>and to write out our file using either
<B>ZZ</B> or <B>:w</B>CR. The first exits from
the editor,
(writing if changes were made),
the second writes and stays in the editor.
<P>
&nbsp;&nbsp;If you have changed the editor's copy of the file but do not wish to
save your changes, either because you messed up the file or decided that the
changes are not an improvement to the file, then you can give the command
<B>:q!</B>CR to quit from the editor without writing the changes.
You can also reedit the same file (starting over) by giving the command
<B>:e!</B>CR.  These commands should be used only rarely, and with
caution, as it is not possible to recover the changes you have made after
you discard them in this manner.
<P>
&nbsp;&nbsp;You can edit a different file without leaving the editor by giving the
command <B>:e</B> <I>name</I>CR.  If you have not written out
your file before you try to do this, then the editor will tell you this,
and delay editing the other file.  You can then give the command
<B>:w</B>CR to save your work and then the <B>:e</B> <I>name</I>CR
command again, or carefully give the command <B>:e!</B> <I>name</I>CR,
which edits the other file discarding the changes you have made to the
current file.
To have the editor automatically save changes,
include
<I>set autowrite
</I>in your EXINIT,
and use <B>:n</B> instead of <B>:e</B>.
<H2><A NAME="section30">5.2.</A>&nbsp;&nbsp;Escaping to a shell
</H2>
<P>
&nbsp;&nbsp;You can get to a shell to execute a single command by giving a
<I>vi
</I>command of the form <B>:!</B><I>cmd</I>CR.
The system will run the single command
<I>cmd
</I>and when the command finishes, the editor will ask you to hit a RETURN
to continue.  When you have finished looking at the output on the screen,
you should hit RETURN and the editor will clear the screen and
redraw it.  You can then continue editing.
You can also give another <B>:</B> command when it asks you for a RETURN;
in this case the screen will not be redrawn.
<P>
&nbsp;&nbsp;If you wish to execute more than one command in the shell, then you can
give the command <B>:sh</B>CR.
This will give you a new shell, and when you finish with the shell, ending
it by typing a <B>^D</B>, the editor will clear the screen and continue.
<P>
&nbsp;&nbsp;On systems which support it, <B>^Z</B> will suspend the editor
and return to the (top level) shell.
When the editor is resumed, the screen will be redrawn.
<H2><A NAME="section31">5.3.</A>&nbsp;&nbsp;Marking and returning
</H2>
<P>
&nbsp;&nbsp;The command <B>``</B> returned to the previous place
after a motion of the cursor by a command such as <B>/</B>, <B>?</B> or
<B>G</B>.  You can also mark lines in the file with single letter tags
and return to these marks later by naming the tags.  Try marking the
current line with the command <B>m</B><I>x</I>, where you should pick some
letter for <I>x</I>, say 'a'.  Then move the cursor to a different line
(any way you like) and hit <B>`a</B>.  The cursor will return to the
place which you marked.
Marks last only until you edit another file.
<P>
&nbsp;&nbsp;When using operators such as
<B>d
</B>and referring to marked lines, it is often desirable to delete whole lines
rather than deleting to the exact position in the line marked by <B>m</B>.
In this case you can use the form <B>'</B><I>x</I> rather than
<B>`</B><I>x</I>.  Used without an operator, <B>'</B><I>x</I> will move to
the first non-white character of the marked line; similarly <B>''</B>
moves to the first non-white character of the line containing the previous
context mark <B>``</B>.
<H2><A NAME="section32">5.4.</A>&nbsp;&nbsp;Adjusting the screen
</H2>
<P>
&nbsp;&nbsp;If the screen image is messed up because of a transmission error to your
terminal, or because some program other than the editor wrote output
to your terminal, you can hit a <B>^L</B>, the ASCII form-feed
character, to cause the screen to be refreshed.
<P>
&nbsp;&nbsp;On a dumb terminal, if there are @ lines in the middle of the screen
as a result of line deletion, you may get rid of these lines by typing
<B>^R</B> to cause the editor to retype the screen, closing up these holes.
<P>
&nbsp;&nbsp;Finally, if you wish to place a certain line on the screen at the top
middle or bottom of the screen, you can position the cursor to that line,
and then give a <B>z</B> command.
You should follow the <B>z</B> command with a RETURN if you want
the line to appear at the top of the window, a <B>.</B> if you want it
at the center, or a <B>-</B> if you want it at the bottom.
<P>
<A HREF="paper.html#toc">Table of Contents</A>
&nbsp;&nbsp;&nbsp;&nbsp;
<A HREF="paper-6.html">Next: Special Topics</A>
</BODY>
</HTML>
