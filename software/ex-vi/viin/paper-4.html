<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>An Introduction to Display Editing with Vi - Section 4</TITLE>
<!-- Sccsid @(#)paper-4.html	1.7 (gritter) 3/8/02 -->
<!-- This file was originally generated by unroff 1.0, 03/14/97 13:33:36. -->
<!-- Derived from the FreeBSD document collection. -->
<LINK REL=stylesheet TYPE="text/css" HREF="paper.css">
</HEAD><BODY>
<H2><A NAME="section23">4.</A>&nbsp;&nbsp;Moving about; rearranging and duplicating text
</H2>
<H2><A NAME="section24">4.1.</A>&nbsp;&nbsp;Low level character motions
</H2>
<P>
&nbsp;&nbsp;Now move the cursor to a line where there is a punctuation or a bracketing
character such as a parenthesis or a comma or period.  Try the command
<B>f</B><I>x</I> where <I>x</I> is this character.  This command finds
the next <I>x</I> character to the right of the cursor in the current
line.  Try then hitting a <B>;</B>, which finds the next instance of the
same character.  By using the <B>f</B> command and then a sequence of
<B>;</B>'s you can often
get to a particular place in a line much faster than with a sequence
of word motions or SPACEs.
There is also a <B>F</B> command, which is like <B>f</B>, but searches 
backward.  The <B>;</B> command repeats <B>F</B> also.
<P>
&nbsp;&nbsp;When you are operating on the text in a line it is often desirable to
deal with the characters up to, but not including, the first instance of
a character.  Try <B>df</B><I>x</I> for some <I>x</I> now and
notice that the <I>x</I> character is deleted.  Undo this with <B>u</B>
and then try <B>dt</B><I>x</I>;  the <B>t</B> here stands for to, i.e.
delete up to the next <I>x</I>, but not the <I>x</I>.  The command <B>T</B>
is the reverse of <B>t</B>.
<P>
&nbsp;&nbsp;When working with the text of a single line, an <B>&uarr;</B> moves the
cursor to the first non-white position on the line, and a
<B>$</B> moves it to the end of the line.  Thus <B>$a</B> will append new
text at the end of the current line.
<P>
&nbsp;&nbsp;Your file may have tab (<B>^I</B>) characters in it.  These
characters are represented as a number of spaces expanding to a tab stop,
where tab stops are every 8 positions
(<A HREF="paper-notes.html#4-1">footnote 4-1</A>).
When the cursor is at a tab, it sits on the last of the several spaces
which represent that tab.  Try moving the cursor back and forth over
tabs so you understand how this works.
<P>
&nbsp;&nbsp;On rare occasions, your file may have nonprinting characters in it. 
These characters are displayed in the same way they are represented in
this document, that is with a two character code, the first character
of which is '^'.  On the screen non-printing characters resemble a '^'
character adjacent to another, but spacing or backspacing over the character
will reveal that the two characters are, like the spaces representing
a tab character, a single character.
<I>Note: Non-printing characters with their most significant bit set
show as </I>'\nnn'<I> in recent versions of the editor, where </I>nnn<I>
is the octal code of the character.</I>
<P>
&nbsp;&nbsp;The editor sometimes discards control characters,
depending on the character and the setting of the
<I>beautify
</I>option,
if you attempt to insert them in your file.
You can get a control character in the file by beginning
an insert and then typing a <B>^V</B> before the control
character.  The
<B>^V</B> quotes the following character, causing it to be
inserted directly into the file.
&nbsp;&nbsp;<H2><A NAME="section25">4.2.</A>&nbsp;&nbsp;Higher level text objects
</H2>
<P>
&nbsp;&nbsp;In working with a document it is often advantageous to work in terms
of sentences, paragraphs, and sections.  The operations <B>(</B> and <B>)</B>
move to the beginning of the previous and next sentences respectively.
Thus the command <B>d)</B> will delete the rest of the current sentence;
likewise <B>d(</B> will delete the previous sentence if you are at the
beginning of the current sentence, or the current sentence up to where
you are if you are not at the beginning of the current sentence.
<P>
&nbsp;&nbsp;A sentence is defined to end at a '.', '!' or '?' which is followed by
either the end of a line, or by two spaces.  Any number of closing ')',
']', '"' and ''' characters may appear after the '.', '!' or '?' before
the spaces or end of line.
<P>
&nbsp;&nbsp;The operations <B>{</B> and <B>}</B> move over paragraphs and the operations
<B>[[</B> and <B>]]</B> move over sections
(<A HREF="paper-notes.html#4-2">footnote 4-2</A>).
<P>
&nbsp;&nbsp;A paragraph begins after each empty line, and also
at each of a set of paragraph macros, specified by the pairs of characters
in the definition of the string valued option <I>paragraphs</I>.
The default setting for this option defines the paragraph macros of the
<I>-ms</I> and <I>-mm</I> macro packages <I>(note:this refers to
the </I>troff<I> text formatting system)</I>,
i.e. the '.IP', '.LP', '.PP'
and '.QP', '.P' and '.LI' macros
(<A HREF="paper-notes.html#4-3">footnote 4-3</A>).
Each paragraph boundary is also a sentence boundary.  The sentence
and paragraph commands can
be given counts to operate over groups of sentences and paragraphs.
<P>
&nbsp;&nbsp;Sections in the editor begin after each macro in the <I>sections</I> option,
normally '.NH', '.SH', '.H' and '.HU', and each line with a formfeed <B>^L</B>
in the first column.
Section boundaries are always line and paragraph boundaries also.
<P>
&nbsp;&nbsp;Try experimenting with the sentence and paragraph commands until you are
sure how they work.  If you have a large document, try looking through
it using the section commands.
The section commands interpret a preceding count as a different window size in
which to redraw the screen at the new location, and this window size
is the base size for newly drawn windows until another size is specified.
This is very useful
if you are on a slow terminal and are looking for a particular section. 
You can give the first section command a small count to then see each successive
section heading in a small window.
<H2><A NAME="section26">4.3.</A>&nbsp;&nbsp;Rearranging and duplicating text
</H2>
<P>
&nbsp;&nbsp;The editor has a single unnamed buffer where the last deleted or
changed away text is saved, and a set of named buffers <B>a</B>-<B>z</B>
which you can use to save copies of text and to move text around in
your file and between files.
<P>
&nbsp;&nbsp;The operator
<B>y
</B>yanks a copy of the object which follows into the unnamed buffer.
If preceded by a buffer name, <B>"</B><I>x</I><B>y</B>, where
<I>x</I> here is replaced by a letter <B>a-z</B>, it places the text in the named
buffer.  The text can then be put back in the file with the commands
<B>p
</B>and
<B>P;
</B><B>p</B> puts the text after or below the cursor, while <B>P</B> puts the text
before or above the cursor.
<P>
&nbsp;&nbsp;If the text which you
yank forms a part of a line, or is an object such as a sentence which
partially spans more than one line, then when you put the text back,
it will be placed after the cursor (or before if you
use <B>P</B>).  If the yanked text forms whole lines, they will be put
back as whole lines, without changing the current line.  In this case,
the put acts much like a <B>o</B> or <B>O</B> command.
<P>
&nbsp;&nbsp;Try the command <B>YP</B>.  This makes a copy of the current line and
leaves you on this copy, which is placed before the current line.
The command <B>Y</B> is a convenient abbreviation for <B>yy</B>.
The command <B>Yp</B> will also make a copy of the current line, and place
it after the current line.  You can give <B>Y</B> a count of lines to
yank, and thus duplicate several lines; try <B>3YP</B>.
<P>
&nbsp;&nbsp;To move text within the buffer, you need to delete it in one place, and
put it back in another.  You can precede a delete operation by the
name of a buffer in which the text is to be stored as in <B>"a5dd</B>
deleting 5 lines into the named buffer <I>a</I>.  You can then move the
cursor to the eventual resting place of the these lines and do a <B>"ap</B>
or <B>"aP</B> to put them back.
In fact, you can switch and edit another file before you put the lines
back, by giving a command of the form <B>:e </B><I>name</I>CR where
<I>name</I> is the name of the other file you want to edit.  You will
have to write back the contents of the current editor buffer (or discard
them) if you have made changes before the editor will let you switch
to the other file.
An ordinary delete command saves the text in the unnamed buffer,
so that an ordinary put can move it elsewhere.
However, the unnamed buffer is lost when you change files,
so to move text from one file to another you should use an unnamed buffer.
<H2><A NAME="section27">4.4.</A>&nbsp;&nbsp;Summary<TT> </TT>
</H2>
<DIV STYLE="margin-left: 20pt;">
<TABLE>
<TR><TD><B>&uarr;</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>first non-white on line</TD></TR>
<TR><TD><B>$</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>end of line</TD></TR>
<TR><TD><B>)</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>forward sentence</TD></TR>
<TR><TD><B>}</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>forward paragraph</TD></TR>
<TR><TD><B>]]</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>forward section</TD></TR>
<TR><TD><B>(</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>backward sentence</TD></TR>
<TR><TD><B>{</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>backward paragraph</TD></TR>
<TR><TD><B>[[</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>backward section</TD></TR>
<TR><TD><B>f</B><I>x</I>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>find x forward in line</TD></TR>
<TR><TD><B>p</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>put text back, after cursor or below current line</TD></TR>
<TR><TD><B>y</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>yank operator, for copies and moves</TD></TR>
<TR><TD><B>t</B><I>x</I>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>up to x forward, for operators</TD></TR>
<TR><TD><B>F</B><I>x</I>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>f backward in line</TD></TR>
<TR><TD><B>P</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>put text back, before cursor or above current line</TD></TR>
<TR><TD><B>T</B><I>x</I>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>t backward in line</TD></TR>
</TABLE>
</DIV>
<P>
<A HREF="paper.html#toc">Table of Contents</A>
&nbsp;&nbsp;&nbsp;&nbsp;
<A HREF="paper-5.html">Next: High Level Commands</A>
</BODY>
</HTML>
