<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>An Introduction to Display Editing with Vi - Section 3</TITLE>
<!-- Sccsid @(#)paper-3.html	1.8 (gritter) 3/8/02 -->
<!-- This file was originally generated by unroff 1.0, 03/14/97 13:33:36. -->
<!-- Derived from the FreeBSD document collection. -->
<LINK REL=stylesheet TYPE="text/css" HREF="paper.css">
</HEAD><BODY>
<H2><A NAME="section16">3.</A>&nbsp;&nbsp;Making simple changes
</H2>
<H2><A NAME="section17">3.1.</A>&nbsp;&nbsp;Inserting
</H2>
<P>
&nbsp;&nbsp;One of the most useful commands is the
<B>i</B> (insert) command.
After you type <B>i</B>, everything you type until you hit ESC
is inserted into the file.
Try this now; position yourself to some word in the file and try inserting
text before this word.
If you are on an dumb terminal it will seem, for a minute,
that some of the characters in your line have been overwritten, but they will
reappear when you hit ESC.
<P>
&nbsp;&nbsp;<I>Note: Recent versions of the </I>vi<I> editor
can optionally display information on
whether characters are read as insertion text or as commands.
Type </I><B>:se showmode</B>CR<I> after hitting </I>ESC<I> to enable this.
More about setting options can be found in
<A HREF="paper-6.html#section35">section 6.2</A>.</I>
<P>
&nbsp;&nbsp;Now try finding a word which can, but does not, end in an 's'.
Position yourself at this word and type <B>e</B> (move to end of word), then
<B>a</B> for append and then 'sESC' to terminate the textual insert.
This sequence of commands can be used to easily pluralize a word.
<P>
&nbsp;&nbsp;Try inserting and appending a few times to make sure you understand how
this works; <B>i</B> placing text to the left of the cursor, <B>a</B> to
the right.
<P>
&nbsp;&nbsp;It is often the case that you want to add new lines to the file you are
editing, before or after some specific line in the file.  Find a line
where this makes sense and then give the command <B>o</B> to create a
new line after the line you are on, or the command <B>O</B> to create
a new line before the line you are on.  After you create a new line in
this way, text you type up to an ESC is inserted on the new line.
<P>
&nbsp;&nbsp;Many related editor commands
are invoked by the same letter key and differ only in that one is given
by a lower
case key and the other is given by
an upper case key.  In these cases, the
upper case key often differs from the lower case key in its sense of
direction, with
the upper case key working backward and/or up, while the lower case
key moves forward and/or down.
<P>
&nbsp;&nbsp;Whenever you are typing in text, you can give many lines of input or
just a few characters.
To type in more than one line of text,
hit a RETURN at the middle of your input.  A new line will be created
for text, and you can continue to type.  If you are on a slow
and dumb terminal the editor may choose to wait to redraw the
tail of the screen, and will let you type over the existing screen lines.
This avoids the lengthy delay which would occur if the editor attempted
to keep the tail of the screen always up to date.  The tail of the screen will
be fixed up, and the missing lines will reappear, when you hit ESC.
<P>
&nbsp;&nbsp;While you are inserting new text, you can use the characters you normally use
at the system command level (usually <B>^H</B> or <B>#</B>) to backspace
over the last
character which you typed, and the character which you use to kill input lines
(usually <B>@</B>, <B>^X</B>, or <B>^U</B>)
to erase the input you have typed on the current line
(<A HREF="paper-notes.html#3-1">footnote 3-1</A>).
The character <B>^W</B>
will erase a whole word and leave you after the space after the previous
word; it is useful for quickly backing up in an insert.
<P>
&nbsp;&nbsp;Notice that when you backspace during an insertion the characters you
backspace over are not erased; the cursor moves backwards, and the characters
remain on the display.  This is often useful if you are planning to type
in something similar.  In any case the characters disappear when when
you hit ESC; if you want to get rid of them immediately, hit an
ESC and then <B>a</B> again.
<P>
&nbsp;&nbsp;Notice also that you can't erase characters which you didn't insert, and that
you can't backspace around the end of a line.  If you need to back up
to the previous line to make a correction, just hit ESC and move
the cursor back to the previous line.  After making the correction you
can return to where you were and use the insert or append command again.
<BR>
<H2><A NAME="section18">3.2.</A>&nbsp;&nbsp;Making small corrections
</H2>
<P>
&nbsp;&nbsp;You can make small corrections in existing text quite easily.
Find a single character which is wrong or just pick any character.
Use the arrow keys to find the character, or
get near the character with the word motion keys and then either
backspace (hit the BS key or <B>^H</B> or even just <B>h</B>) or 
SPACE (using the space bar)
until the cursor is on the character which is wrong.
If the character is not needed then hit the <B>x</B> key; this deletes
the character from the file.  It is analogous to the way you <B>x</B>
out characters when you make mistakes on a typewriter (except it's not
as messy).
<P>
&nbsp;&nbsp;If the character
is incorrect, you can replace it with the correct character by giving
the command <B>r</B><I>c</I>,
where <I>c</I> is replaced by the correct character.
Finally if the character which is incorrect should be replaced
by more than one character, give the command <B>s</B> which substitutes
a string of characters, ending with ESC, for it.
If there are a small number of characters
which are wrong you can precede <B>s</B> with a count of the number of
characters to be replaced.  Counts are also useful with <B>x</B> to specify
the number of characters to be deleted.
<H2><A NAME="section19">3.3.</A>&nbsp;&nbsp;More corrections: operators
</H2>
<P>
&nbsp;&nbsp;You already know almost enough to make changes at a higher level.
All you need to know now is that the 
<B>d
</B>key acts as a delete operator.  Try the command
<B>dw
</B>to delete a word.
Try hitting <B>.</B> a few times.  Notice that this repeats the effect
of the <B>dw</B>.  The command <B>.</B> repeats the last command which
made a change.  You can remember it by analogy with an ellipsis '<B>...</B>'.
<P>
&nbsp;&nbsp;Now try
<B>db</B>.
This deletes a word backwards, namely the preceding word.
Try 
<B>d</B>SPACE.  This deletes a single character, and is equivalent
to the <B>x</B> command.
<P>
&nbsp;&nbsp;Another very useful operator is
<B>c
</B>or change.  The command 
<B>cw
</B>thus changes the text of a single word.
You follow it by the replacement text ending with an ESC.
Find a word which you can change to another, and try this
now.
Notice that the end of the text to be changed was marked with the character
'$' so that you can see this as you are typing in the new material.
<BR>
<H2><A NAME="section20">3.4.</A>&nbsp;&nbsp;Operating on lines
</H2>
<P>
&nbsp;&nbsp;It is often the case that you want to operate on lines.
Find a line which you want to delete, and type 
<B>dd</B>,
the
<B>d
</B>operator twice.  This will delete the line.
If you are on a dumb terminal, the editor may just erase the line on
the screen, replacing it with a line with only an @ on it.  This line
does not correspond to any line in your file, but only acts as a place
holder.  It helps to avoid a lengthy redraw of the rest of the screen
which would be necessary to close up the hole created by the deletion
on a terminal without a delete line capability.
<P>
&nbsp;&nbsp;Try repeating the
<B>c
</B>operator twice; this will change a whole line, erasing its previous contents and
replacing them with text you type up to an ESC
(<A HREF="paper-notes.html#3-2">footnote 3-2</A>).
<P>
&nbsp;&nbsp;You can delete or change more than one line by preceding the
<B>dd
</B>or
<B>cc
</B>with a count, i.e. <B>5dd</B> deletes 5 lines.
You can also give a command like <B>dL</B> to delete all the lines up to
and including
the last line on the screen, or <B>d3L</B> to delete through the third from
the bottom line.  Try some commands like this now
(<A HREF="paper-notes.html#3-3">footnote 3-3</A>).
Notice that the editor lets you know when you change a large number of
lines so that you can see the extent of the change.
The editor will also always tell you when a change you make affects text which
you cannot see.
<H2><A NAME="section21">3.5.</A>&nbsp;&nbsp;Undoing
</H2>
<P>
&nbsp;&nbsp;Now suppose that the last change which you made was incorrect;
you could use the insert, delete and append commands to put the correct
material back.  However, since it is often the case that we regret a
change or make a change incorrectly, the editor provides a
<B>u
</B>(undo) command to reverse the last change which you made.
Try this a few times, and give it twice in a row to notice that an
<B>u
</B>also undoes a
<B>u.
</B><P>
&nbsp;&nbsp;The undo command lets you reverse only a single change.  After you make
a number of changes to a line, you may decide that you would rather have
the original state of the line back.  The
<B>U
</B>command restores the current line to the state before you started changing
it.
<P>
&nbsp;&nbsp;You can recover text which you delete, even if
undo will not bring it back; see the
<A HREF="paper-6.html#section36">section on recovering lost text</A>
below.
<H2><A NAME="section22">3.6.</A>&nbsp;&nbsp;Summary
</H2>
<DIV STYLE="margin-left: 20pt;">
<TABLE>
<TR><TD>SPACE&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>advance the cursor one position</TD></TR>
<TR><TD><B>^H</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>backspace the cursor</TD></TR>
<TR><TD><B>^W</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>erase a word during an insert</TD></TR>
<TR><TD>erase&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>your erase (usually ^H or #), erases a character during an insert</TD></TR>
<TR><TD>kill&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>your kill (usually @, ^X, or ^U), kills the insert on this line</TD></TR>
<TR><TD><B>.</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>repeats the changing command</TD></TR>
<TR><TD><B>O</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>opens and inputs new lines, above the current</TD></TR>
<TR><TD><B>U</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>undoes the changes you made to the current line</TD></TR>
<TR><TD><B>a</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>appends text after the cursor</TD></TR>
<TR><TD><B>c</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>changes the object you specify to the following text</TD></TR>
<TR><TD><B>d</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>deletes the object you specify</TD></TR>
<TR><TD><B>i</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>inserts text before the cursor</TD></TR>
<TR><TD><B>o</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>opens and inputs new lines, below the current</TD></TR>
<TR><TD><B>u</B>&nbsp;&nbsp;&nbsp;&nbsp;</TD><TD>undoes the last change</TD></TR>
</TABLE>
</DIV>
<P>
<A HREF="paper.html#toc">Table of Contents</A>
&nbsp;&nbsp;&nbsp;&nbsp;
<A HREF="paper-4.html">Next: Moving about; rearranging and duplicating text</A>
</BODY>
</HTML>
